;
angular
    .module('OlapVisual', [])

    .controller('mainController', ['$scope', function ($scope) {
        $scope.data = [{"_id":"5925af7bcfc517960b38d60e","index":0,"coordX":93,"coordY":85,"radius":32,"color":"#dbb2f1","created":"2017-04-21"},{"_id":"5925af7b3346df59843b6d58","index":1,"coordX":44,"coordY":7,"radius":6,"color":"#ce856a","created":"2015-12-29"},{"_id":"5925af7bd5bc1bce93f8c573","index":2,"coordX":30,"coordY":81,"radius":9,"color":"#21f065","created":"2015-05-14"},{"_id":"5925af7ba76c219456231ea1","index":3,"coordX":57,"coordY":64,"radius":18,"color":"#600fd1","created":"2015-01-14"},{"_id":"5925af7b67ad05b40180c3cf","index":4,"coordX":17,"coordY":27,"radius":28,"color":"#ec675f","created":"2015-11-17"},{"_id":"5925af7ba3013c0bc6b76b9c","index":5,"coordX":84,"coordY":15,"radius":50,"color":"#7e921e","created":"2016-10-07"},{"_id":"5925af7b47af83c81785a319","index":6,"coordX":31,"coordY":79,"radius":16,"color":"#d876ed","created":"2014-07-21"},{"_id":"5925af7b12d4990ff1a759e6","index":7,"coordX":91,"coordY":77,"radius":30,"color":"#34e462","created":"2014-11-02"},{"_id":"5925af7b2f99d57ca92c9b6b","index":8,"coordX":63,"coordY":98,"radius":39,"color":"#94884b","created":"2015-06-14"},{"_id":"5925af7b5383f659037c34b2","index":9,"coordX":62,"coordY":23,"radius":3,"color":"#85a081","created":"2016-09-08"},{"_id":"5925af7b3e2c1ecdfdcc9b0e","index":10,"coordX":87,"coordY":24,"radius":5,"color":"#a91fd1","created":"2015-08-14"},{"_id":"5925af7b07cbbdcf45579478","index":11,"coordX":28,"coordY":26,"radius":25,"color":"#fb15eb","created":"2017-03-11"},{"_id":"5925af7bc9f5b378ab19eb21","index":12,"coordX":17,"coordY":24,"radius":44,"color":"#ce7c66","created":"2016-12-30"},{"_id":"5925af7bb9324bc4985e0e32","index":13,"coordX":43,"coordY":98,"radius":21,"color":"#98799d","created":"2016-07-22"},{"_id":"5925af7bbd9379406cc8f7c7","index":14,"coordX":35,"coordY":17,"radius":43,"color":"#c7f55f","created":"2015-09-02"},{"_id":"5925af7b0e666124ac3dd920","index":15,"coordX":31,"coordY":52,"radius":24,"color":"#48614b","created":"2014-11-11"},{"_id":"5925af7b1a6bf5a4d604955e","index":16,"coordX":43,"coordY":26,"radius":16,"color":"#fface6","created":"2016-07-03"},{"_id":"5925af7b15ae1cbbe31bfc05","index":17,"coordX":10,"coordY":85,"radius":10,"color":"#7a4a5b","created":"2016-04-06"},{"_id":"5925af7b6fee0c33ffec3d6a","index":18,"coordX":11,"coordY":98,"radius":31,"color":"#21398e","created":"2014-11-28"},{"_id":"5925af7bc4f0980f8f78624a","index":19,"coordX":86,"coordY":54,"radius":41,"color":"#d27bd4","created":"2015-01-19"},{"_id":"5925af7b65e1079a74bc5c0c","index":20,"coordX":38,"coordY":84,"radius":45,"color":"#e01701","created":"2014-09-10"},{"_id":"5925af7b2270215c1cb036f6","index":21,"coordX":59,"coordY":45,"radius":3,"color":"#629fa3","created":"2016-12-09"},{"_id":"5925af7bbba3bbd14e60f1bb","index":22,"coordX":94,"coordY":25,"radius":8,"color":"#e4be21","created":"2014-05-13"},{"_id":"5925af7b9fd42f984d720865","index":23,"coordX":6,"coordY":10,"radius":2,"color":"#238785","created":"2017-03-26"},{"_id":"5925af7be1c2a7c4839a09b1","index":24,"coordX":88,"coordY":84,"radius":32,"color":"#48d386","created":"2014-03-25"},{"_id":"5925af7b27b7218e18ad4230","index":25,"coordX":41,"coordY":81,"radius":49,"color":"#77b348","created":"2014-03-13"},{"_id":"5925af7ba7e4f0fb07a8b125","index":26,"coordX":74,"coordY":27,"radius":5,"color":"#ef0831","created":"2016-08-19"},{"_id":"5925af7bacefdb871fc22e09","index":27,"coordX":84,"coordY":67,"radius":6,"color":"#442de3","created":"2014-04-24"},{"_id":"5925af7bb2f2fc708aa46e9f","index":28,"coordX":16,"coordY":41,"radius":48,"color":"#31253a","created":"2015-06-12"},{"_id":"5925af7bd9b309c5db267afc","index":29,"coordX":99,"coordY":18,"radius":30,"color":"#a6e3bb","created":"2015-09-11"},{"_id":"5925af7b9e846808f03094f7","index":30,"coordX":56,"coordY":27,"radius":20,"color":"#2da29a","created":"2016-04-19"},{"_id":"5925af7b2700b3daa98d7df4","index":31,"coordX":19,"coordY":46,"radius":6,"color":"#f24a98","created":"2016-11-15"},{"_id":"5925af7b00cbbcad05ad14ad","index":32,"coordX":48,"coordY":51,"radius":10,"color":"#db6686","created":"2016-12-21"},{"_id":"5925af7b7e5790090a5ff356","index":33,"coordX":59,"coordY":55,"radius":16,"color":"#d277f7","created":"2015-07-13"},{"_id":"5925af7b244e1c192fb8aada","index":34,"coordX":58,"coordY":93,"radius":1,"color":"#4aaef1","created":"2014-03-25"},{"_id":"5925af7be3df05fc4f965d75","index":35,"coordX":85,"coordY":48,"radius":18,"color":"#6b535e","created":"2014-02-08"},{"_id":"5925af7b5a46e48e43424280","index":36,"coordX":7,"coordY":61,"radius":14,"color":"#706539","created":"2016-07-06"},{"_id":"5925af7bd134718b026a67bd","index":37,"coordX":4,"coordY":63,"radius":12,"color":"#92ba13","created":"2016-06-18"},{"_id":"5925af7b793243001ce819b7","index":38,"coordX":68,"coordY":42,"radius":9,"color":"#dff99b","created":"2015-11-13"},{"_id":"5925af7b05c7e0bb6a8cf01e","index":39,"coordX":10,"coordY":99,"radius":2,"color":"#71be0a","created":"2014-02-21"},{"_id":"5925af7b271cf6ed4598eb31","index":40,"coordX":88,"coordY":51,"radius":17,"color":"#71b6cc","created":"2015-07-23"},{"_id":"5925af7b458a3623febc5df8","index":41,"coordX":16,"coordY":14,"radius":3,"color":"#692864","created":"2017-03-26"},{"_id":"5925af7b6944281cfc54d0b3","index":42,"coordX":37,"coordY":77,"radius":32,"color":"#2d37bf","created":"2016-06-28"},{"_id":"5925af7bf9a8be861c1a7396","index":43,"coordX":82,"coordY":91,"radius":13,"color":"#d55236","created":"2017-02-24"},{"_id":"5925af7b97a4cfa1f8a99050","index":44,"coordX":36,"coordY":12,"radius":16,"color":"#179d4f","created":"2016-12-11"},{"_id":"5925af7b1b8c83a8b9335bc1","index":45,"coordX":19,"coordY":41,"radius":25,"color":"#f2a899","created":"2017-02-04"},{"_id":"5925af7b381cb9cf28213546","index":46,"coordX":6,"coordY":1,"radius":16,"color":"#d36b8e","created":"2014-12-31"},{"_id":"5925af7b81e490a383d8cf33","index":47,"coordX":59,"coordY":84,"radius":37,"color":"#9f5178","created":"2014-06-27"},{"_id":"5925af7be3b8d8d9fcf6455d","index":48,"coordX":4,"coordY":15,"radius":33,"color":"#6d8ec2","created":"2014-08-25"},{"_id":"5925af7b25378cd65c7a2f58","index":49,"coordX":22,"coordY":22,"radius":34,"color":"#175e83","created":"2016-02-04"},{"_id":"5925af7b9a5b9ce3ab1259da","index":50,"coordX":88,"coordY":6,"radius":11,"color":"#bc2d32","created":"2014-03-28"},{"_id":"5925af7bc72d1d54ca361b8d","index":51,"coordX":9,"coordY":14,"radius":24,"color":"#34aa26","created":"2016-04-25"},{"_id":"5925af7b83e017b314bbb75b","index":52,"coordX":29,"coordY":71,"radius":17,"color":"#dcbd78","created":"2014-11-03"},{"_id":"5925af7b87220fe74f780833","index":53,"coordX":63,"coordY":70,"radius":25,"color":"#16a73f","created":"2016-08-25"},{"_id":"5925af7b1349590d1b952c5d","index":54,"coordX":41,"coordY":36,"radius":31,"color":"#53bbf8","created":"2015-10-31"},{"_id":"5925af7b7d081ccad53d95b7","index":55,"coordX":89,"coordY":27,"radius":47,"color":"#9cb4a1","created":"2014-10-17"},{"_id":"5925af7b0d33a326ccd7bd01","index":56,"coordX":83,"coordY":16,"radius":46,"color":"#d5ad92","created":"2017-03-30"},{"_id":"5925af7bb3dadcbf519e82ed","index":57,"coordX":68,"coordY":6,"radius":1,"color":"#711190","created":"2017-03-25"},{"_id":"5925af7b76f0491ee235daee","index":58,"coordX":99,"coordY":1,"radius":28,"color":"#7d83b9","created":"2014-10-03"},{"_id":"5925af7b699384ca9231c561","index":59,"coordX":32,"coordY":94,"radius":20,"color":"#933aad","created":"2015-06-04"},{"_id":"5925af7bd17952f463b7c9fa","index":60,"coordX":41,"coordY":6,"radius":31,"color":"#e5949a","created":"2015-01-18"},{"_id":"5925af7b415009ecaeee8d8f","index":61,"coordX":62,"coordY":44,"radius":8,"color":"#99c243","created":"2014-08-25"},{"_id":"5925af7b1feaa0838f107db5","index":62,"coordX":79,"coordY":46,"radius":23,"color":"#663ef8","created":"2016-11-20"},{"_id":"5925af7b13cdd02aae2b185b","index":63,"coordX":3,"coordY":11,"radius":13,"color":"#907b58","created":"2016-06-14"},{"_id":"5925af7bf9143660cfd8a0b8","index":64,"coordX":28,"coordY":15,"radius":49,"color":"#0d0bf3","created":"2016-08-10"},{"_id":"5925af7ba391faa809d32961","index":65,"coordX":96,"coordY":23,"radius":20,"color":"#dd9f1c","created":"2014-09-27"},{"_id":"5925af7b09cdfb60ae129f10","index":66,"coordX":78,"coordY":12,"radius":9,"color":"#079c39","created":"2017-04-13"},{"_id":"5925af7b4d6573634b05f422","index":67,"coordX":76,"coordY":50,"radius":9,"color":"#0f8218","created":"2015-02-10"},{"_id":"5925af7be7c98c22b5c96201","index":68,"coordX":26,"coordY":36,"radius":42,"color":"#d1d540","created":"2016-09-29"},{"_id":"5925af7bdc72d14e822af3af","index":69,"coordX":84,"coordY":28,"radius":7,"color":"#c025ea","created":"2015-01-23"},{"_id":"5925af7b2c1a7b95e29378f6","index":70,"coordX":57,"coordY":5,"radius":11,"color":"#3294a9","created":"2014-10-12"},{"_id":"5925af7bb323675cddaf2294","index":71,"coordX":19,"coordY":4,"radius":50,"color":"#ee6b5d","created":"2016-04-14"},{"_id":"5925af7b5ed61c36d30bc464","index":72,"coordX":15,"coordY":20,"radius":1,"color":"#afc0eb","created":"2017-04-20"},{"_id":"5925af7b0a2b3fa7b6d8f39e","index":73,"coordX":8,"coordY":78,"radius":50,"color":"#9c371a","created":"2016-05-12"}];
        $scope.data.forEach((e) => e.created = new Date(e.created));

        $scope.selectedMeter = null;

        $scope.setMeter = function (meter) {
            $scope.selectedMeter = meter;
        }

        $scope.filterMetersFn = function (meter) {
            const filterParams = {
                dateTo: new Date()
            };

            // date
            let date = meter.created;
            let dateFrom = filterParams.dateFrom || -Infinity;
            let dateTo = filterParams.dateTo || Infinity;

            return date > dateFrom
                && date < dateTo;
        }
    }]);
